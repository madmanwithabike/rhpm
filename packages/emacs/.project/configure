#!/bin/bash

set -eu
set -o pipefail

DIR="`dirname \"${BASH_SOURCE[0]}\"`"
if [[ ! -d "$DIR" ]]; then DIR="$PWD"; fi
source "$DIR/configs"
source "$DIR/paths"
unset DIR

#./dependencies/$DEP_NAME

cd $SRC_PATH
git checkout $SRC_VERSION

patch -p1 --no-backup-if-mismatch \
       < "$PRJ_PATH"/patch/`
      `allow-negative-line-width-for-box-face-attribute.patch

./autogen.sh all
./configure --with-xft --with-x-toolkit=gtk3 --with-xwidgets \
            --with-modules
